<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ãƒãƒ»ãƒˆãƒ­ è¨ºæ–­ãƒ†ã‚¹ãƒˆï¼ˆ7ã‚¿ã‚¤ãƒ—ï¼9å•ï¼‰</title>
<style>
  :root {
    --bg: #fff9fe;
    --card: #ffffff;
    --ink: #2b2b2b;
    --accent: #ff66b3;
    --muted: #777;
  }
  html, body {
    margin: 0; padding: 0; background: var(--bg); color: var(--ink);
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Noto Sans JP", "Hiragino Kaku Gothic ProN", "Meiryo", "Helvetica Neue", Arial, sans-serif;
  }
  .container { max-width: 860px; margin: 24px auto; padding: 16px; }
  .card {
    background: var(--card); border-radius: 16px; box-shadow: 0 6px 24px rgba(0,0,0,0.06);
    padding: 20px; margin-bottom: 16px;
  }
  h1 { font-size: 1.6rem; margin: 0 0 8px; }
  p.lead { color: var(--muted); margin-top: 4px; }
  .q { margin: 16px 0 12px; font-weight: 700; }
  .opts { display: grid; grid-template-columns: 1fr; gap: 8px; }
  .opt {
    border: 1.5px solid #f3d2e7; border-radius: 12px; padding: 12px 14px; cursor: pointer;
    transition: transform .06s ease, border-color .15s ease, background .15s ease;
    user-select: none; background: #fff;
  }
  .opt:hover { transform: translateY(-1px); }
  .opt.selected { border-color: var(--accent); background: #fff2f8; }
  .controls { display: flex; gap: 12px; flex-wrap: wrap; margin-top: 12px; }
  button {
    appearance: none; border: none; border-radius: 999px; padding: 12px 18px;
    font-weight: 700; cursor: pointer; background: var(--accent); color: white;
    box-shadow: 0 4px 14px rgba(255,102,179,.35);
  }
  button.secondary { background: #f2f2f2; color: #333; box-shadow: none; }
  .result {
    border: 2px dashed #ffd3e9; border-radius: 16px; padding: 16px; background: #fffdfd;
  }
  .pill {
    display: inline-block; padding: 6px 10px; border-radius: 999px; background: #ffe3f1; color: #b03d79; font-weight: 700; font-size: 0.9rem;
    margin-right: 8px; margin-bottom: 6px;
  }
  .small { color: var(--muted); font-size: 0.92rem; }
  .footer { text-align: center; color: var(--muted); font-size: 0.86rem; margin-top: 14px; }
  @media (min-width: 720px) { .opts { grid-template-columns: 1fr 1fr; } }
</style>
</head>
<body>
  <div class="container">
    <div class="card">
      <h1>ãƒãƒ»ãƒˆãƒ­è¨ºæ–­ï¼ˆ7ã‚¿ã‚¤ãƒ—ï¼9å•ï¼‰</h1>
      <p class="lead">ã€Œã”ä¸»äººæ§˜ã¯ã€‡ã€‡ã‚¿ã‚¤ãƒ—ï¼ä»Šæ—¥ã®ãŠçµ¦ä»•ã¯â–³â–³ãƒ¡ã‚¤ãƒ‰ãŒã‚ªã‚¹ã‚¹ãƒ¡ã§ã™ğŸ’–ã€ãŒåˆ†ã‹ã‚‹è‡ªå·±è¨ºæ–­ã€‚å…¨9å•ã«ç­”ãˆã¦çµæœã‚’ãƒã‚§ãƒƒã‚¯ï¼</p>
    </div>

    <div id="quiz"></div>

    <div class="card">
      <div class="controls">
        <button id="btnSubmit">çµæœã‚’è¦‹ã‚‹</button>
        <button class="secondary" id="btnReset">ã‚„ã‚Šç›´ã™</button>
      </div>
      <p class="small">â€»ã‚¿ã‚¤ãƒ—ãƒ»ãƒ¡ã‚¤ãƒ‰å‰²å½“ãƒ»è³ªå•æ–‡ã¯ãƒ•ã‚¡ã‚¤ãƒ«å†…ã® <strong>TYPES</strong> / <strong>QUESTIONS</strong> ã§ç·¨é›†ã§ãã¾ã™ã€‚</p>
    </div>

    <div id="resultCard" class="card" style="display:none;">
      <div class="result">
        <div id="resultTitle" style="font-size:1.2rem; font-weight:800; margin-bottom:6px;"></div>
        <div id="resultRecommend" style="margin-bottom:8px;"></div>
        <div id="resultDesc" class="small"></div>
        <div id="secondBest" class="small" style="margin-top:10px; display:none;"></div>
      </div>
    </div>

    <div class="footer">Â© Poãƒ»TRO</div>
  </div>

<script>
const TYPES = [
  { key: "A", label: "ç™’ã—ç³»ã‚¿ã‚¤ãƒ—", desc: "ã»ã£ã¨ä¸€æ¯ã€‚å„ªã—ã„æ™‚é–“ã‚’æ±‚ã‚ã‚‹ã”ä¸»äººæ§˜ã€‚", maids: ["ãŠã¨", "ãªã", "ã‚†ã®"] },
  { key: "B", label: "å…ƒæ°—ã£å­ã‚¿ã‚¤ãƒ—", desc: "ã‚ã„ã‚ã„æ¥½ã—ãï¼ã‚¨ãƒãƒ«ã‚®ãƒ¼è£œçµ¦ã—ãŸã„ã”ä¸»äººæ§˜ã€‚", maids: ["ã†ãª", "ãƒŸã‚«", "ã‚Šã‚"] },
  { key: "C", label: "å¤§äººã‚¯ãƒ¼ãƒ«ã‚¿ã‚¤ãƒ—", desc: "è½ã¡ç€ãã¨å®‰å¿ƒæ„Ÿã€‚ã—ã£ã¨ã‚Šéã”ã—ãŸã„ã”ä¸»äººæ§˜ã€‚", maids: ["ã¾ã‚Šã‚“", "ã¾ã‚"] },
  { key: "D", label: "ä¸æ€è­°å¹»æƒ³ã‚¿ã‚¤ãƒ—", desc: "å€‹æ€§çš„ã§å¹»æƒ³çš„ãªä¸–ç•Œè¦³ã«æµ¸ã‚ŠãŸã„ã”ä¸»äººæ§˜ã€‚", maids: ["å¯æœˆ", "ã‚‹ãª", "ã‚Œã„"] },
  { key: "E", label: "ç”˜ãˆã‚“ã¼ã‚¿ã‚¤ãƒ—", desc: "å¯æ„›ã„è¦ç´ ã«å…¨æŒ¯ã‚Šï¼ã¨ã“ã¨ã‚“ç™’ã•ã‚ŒãŸã„ã”ä¸»äººæ§˜ã€‚", maids: ["æµ·æœˆ", "ã­ã­"] },
  { key: "F", label: "ãŠå§‰ã•ã‚“åŒ…å®¹ã‚¿ã‚¤ãƒ—", desc: "åŒ…ã¿è¾¼ã‚€å®‰å¿ƒæ„Ÿã€‚é ¼ã‚Œã‚‹å…ˆè¼©ã«ç”˜ãˆãŸã„ã”ä¸»äººæ§˜ã€‚", maids: ["ã¹ã‚", "ã¿ãŠ"] },
  { key: "G", label: "ã‚ªã‚¿ã‚¯è«‡ç¾©ã‚¿ã‚¤ãƒ—", desc: "æ¨ã—æ´»ãƒ»è¶£å‘³èªã‚Šã§ç››ã‚Šä¸ŠãŒã‚ŠãŸã„ã”ä¸»äººæ§˜ã€‚", maids: ["ã—ãã‚Œ", "ã·ã·", "ã‚½ãƒ•ã‚£ã‚¢"] },
];

const QUESTIONS = [
  {
    q: "ä»Šæ—¥ã¯ã©ã‚“ãªæ°—åˆ†ã§ãƒãƒ»ãƒˆãƒ­ã«æ¥ã¾ã—ãŸã‹ï¼Ÿ",
    a: [
      { text: "ã‚†ã£ãŸã‚Šç™’ã•ã‚ŒãŸã„", typeIndex: 0 },
      { text: "å…ƒæ°—ã‚’ã‚‚ã‚‰ã£ã¦ç››ã‚Šä¸ŠãŒã‚ŠãŸã„ï¼", typeIndex: 1 },
      { text: "è½ã¡ç€ã„ãŸæ™‚é–“ã‚’é™ã‹ã«æ¥½ã—ã¿ãŸã„", typeIndex: 2 },
      { text: "ã¡ã‚‡ã£ã¨ä¸æ€è­°ãªä¸–ç•Œã«æµ¸ã‚ŠãŸã„", typeIndex: 3 },
      { text: "å¯æ„›ã•ã«åŒ…ã¾ã‚Œã¦ã‚­ãƒ¥ãƒ³ã¨ã—ãŸã„", typeIndex: 4 },
      { text: "å„ªã—ã„ãŠå§‰ã•ã‚“ã«åŒ…ã¾ã‚ŒãŸã„", typeIndex: 5 },
      { text: "è¶£å‘³ã‚„æ¨ã—ã®è©±ã‚’æ€ã„ã£ãã‚Šèªã‚ŠãŸã„ï¼", typeIndex: 6 },
    ]
  },
  {
    q: "ä»Šé£²ã¿ãŸã„ãƒ‰ãƒªãƒ³ã‚¯ã¯ï¼Ÿ",
    a: [
      { text: "ã‚ãŸãŸã‹ã„ç´…èŒ¶ã‚„ã‚«ãƒ•ã‚§ã‚ªãƒ¬ã§ã»ã£ã¨ä¸€æ¯", typeIndex: 0 },
      { text: "ã—ã‚…ã‚ã—ã‚…ã‚ç‚­é…¸ç³»ã§ãƒ†ãƒ³ã‚·ãƒ§ãƒ³UPï¼", typeIndex: 1 },
      { text: "ãƒãƒ³ã‚¢ãƒ«ã‚³ãƒ¼ãƒ«ã‚«ã‚¯ãƒ†ãƒ«ã§å¤§äººã®é›°å›²æ°—", typeIndex: 2 },
      { text: "å†·ãŸã„ã‚³ãƒ¼ãƒ³ãƒã‚¿ãƒ¼ã‚¸ãƒ¥ã‚’è©¦ã—é£²ã¿", typeIndex: 3 },
      { text: "ãƒŸãƒ«ã‚¯ã‚„ã‚³ã‚³ã‚¢ã§å¯æ„›ã•è£œçµ¦", typeIndex: 4 },
      { text: "ãƒ“ãƒ¼ãƒ«ã‚„ãƒã‚¤ãƒœãƒ¼ãƒ«ã§å±…é…’å±‹æ°—åˆ†â™ª", typeIndex: 5 },
      { text: "ãƒ–ãƒ©ãƒƒã‚¯ã‚³ãƒ¼ãƒ’ãƒ¼ã§ã‚ªã‚¿ã‚¯ãƒˆãƒ¼ã‚¯å…¨é–‹ï¼", typeIndex: 6 },
    ]
  },
  {
    q: "ã‹ã‘ã‚‰ã‚ŒãŸã„ä¸€è¨€ã¯ï¼Ÿ",
    a: [
      { text: "ã”ä¸»äººæ§˜ã€ãŠç–²ã‚Œã•ã¾ã§ã™ğŸ’– ã‚†ã£ãã‚Šã—ã¦ã„ã£ã¦ãã ã•ã„ã­", typeIndex: 0 },
      { text: "ã‚„ã£ã»ãƒ¼ã£ï¼ä¸€ç·’ã«ç››ã‚Šä¸ŠãŒã£ã¡ã‚ƒã„ã¾ã—ã‚‡ãƒ¼ï¼", typeIndex: 1 },
      { text: "å¤§ä¸ˆå¤«ã€‚ä»Šæ—¥ã¯ã‚ãŸã—ã«ä»»ã›ã¦å®‰å¿ƒã—ã¦ã­", typeIndex: 2 },
      { text: "ãµãµã£ã€ã”ä¸»äººæ§˜ã ã‘ã«ç‰¹åˆ¥ãªç§˜å¯†ã‚’æ•™ãˆã¡ã‚ƒã†ã‹ã‚‚â€¦ï¼Ÿ", typeIndex: 3 },
      { text: "ãˆã¸ã¸ã€œã€æ¥ã¦ãã‚Œã¦ã¨ã£ã¦ã‚‚å¬‰ã—ã„ã®ã§ã™ã£", typeIndex: 4 },
      { text: "å›°ã£ãŸã‚‰ã„ã¤ã§ã‚‚é ¼ã£ã¦ã­ã€‚ã—ã£ã‹ã‚Šæ”¯ãˆã¦ã‚ã’ã‚‹ã‹ã‚‰", typeIndex: 5 },
      { text: "ãã®ã‚¢ãƒ‹ãƒ¡è¦³ã¾ã—ãŸï¼ï¼Ÿèªã‚Šåˆãˆã‚‹ã®å¬‰ã—ã™ãã¾ã™ã€œï¼", typeIndex: 6 },
    ]
  },
  {
    q: "å¥½ããªé›°å›²æ°—ã¯ï¼Ÿ",
    a: [
      { text: "ã”ä¸»äººæ§˜ã‚’åŒ…ã¿è¾¼ã‚€ã€ã»ã‚ã»ã‚ç™’ã—ç©ºé–“", typeIndex: 0 },
      { text: "ã¿ã‚“ãªã§ã€èŒãˆèŒãˆãã‚…ã‚“â™ªã€ã¨ç››ã‚Šä¸ŠãŒã‚‹ã«ãã‚„ã‹ç©ºé–“", typeIndex: 1 },
      { text: "è½ã¡ç€ã„ãŸãƒˆãƒ¼ãƒ³ã§ã€ãŠé…’ã¨ãŠè©±ã‚’ã‚†ã£ãã‚Šæ¥½ã—ã‚ã‚‹ç©ºé–“", typeIndex: 2 },
      { text: "ãƒ©ãƒ³ãƒ—ã®å…‰ã‚„ä¸æ€è­°ãªBGMã«åŒ…ã¾ã‚Œã‚‹å¹»æƒ³çš„ãªç©ºé–“", typeIndex: 3 },
      { text: "ã‹ã‚ã„ã„å£°ã¨ä»•è‰ãŒé£›ã³äº¤ã†ã€ãã‚…ã‚“ãã‚…ã‚“èŒãˆç©ºé–“", typeIndex: 4 },
      { text: "ã€ãŠã‹ãˆã‚Šãªã•ã„ã€ã«å®‰å¿ƒã™ã‚‹ã€é ¼ã‚Œã‚‹ãŠå§‰ã•ã‚“ãŒå¾…ã¤ç©ºé–“", typeIndex: 5 },
      { text: "ãƒ¡ã‚¤ãƒ‰ã•ã‚“ã¨ä¸€ç·’ã«æ¨ã—ã‚„ã‚¢ãƒ‹ãƒ¡ã®è©±ã§ç››ã‚Šä¸ŠãŒã‚‹ã‚ªã‚¿ã‚¯ç©ºé–“", typeIndex: 6 },
    ]
  },
  {
    q: "ä¸€ç·’ã«ã—ãŸã„ã“ã¨ã¯ï¼Ÿ",
    a: [
      { text: "ã®ã‚“ã³ã‚ŠãŠè©±ã—ã¦ã€å¿ƒã‚’ã½ã‹ã½ã‹ç™’ã—ã¦ã»ã—ã„", typeIndex: 0 },
      { text: "ãƒã‚§ã‚­ã‚„ã‚²ãƒ¼ãƒ ã§ã€å…¨åŠ›ã§ç››ã‚Šä¸ŠãŒã‚ŠãŸã„ï¼", typeIndex: 1 },
      { text: "ãŠã—ã‚ƒã‚Œã«ãƒ‰ãƒªãƒ³ã‚¯ã‚’å‚¾ã‘ãªãŒã‚‰ã€å¤§äººãªä¼šè©±ã‚’æ¥½ã—ã¿ãŸã„", typeIndex: 2 },
      { text: "éæ—¥å¸¸ãªä¸–ç•Œè¦³ã«ã²ãŸã£ã¦ã€ä¸æ€è­°ä½“é¨“ã‚’å‘³ã‚ã„ãŸã„", typeIndex: 3 },
      { text: "ãƒ¡ã‚¤ãƒ‰ã•ã‚“ã«ç”˜ã‚„ã‹ã•ã‚Œã¦ã€ã¨ã“ã¨ã‚“å¯æ„›ãŒã‚‰ã‚ŒãŸã„", typeIndex: 4 },
      { text: "å„ªã—ã„ãŠå§‰ã•ã‚“ã«ç›¸è«‡ã—ãŸã‚Šã€é ¼ã‚‰ã›ã¦ã‚‚ã‚‰ã„ãŸã„", typeIndex: 5 },
      { text: "æ¨ã—æ´»ãƒˆãƒ¼ã‚¯ã‚„ã‚¢ãƒ‹ãƒ¡ãƒ»ã‚²ãƒ¼ãƒ è«‡ç¾©ã§ç››ã‚Šä¸ŠãŒã‚ŠãŸã„", typeIndex: 6 },
    ]
  },
  {
    q: "æ¨ã—ãƒã‚¤ãƒ³ãƒˆã§é¸ã¶ãªã‚‰ï¼Ÿ",
    a: [
      { text: "ã‚„ã•ã—ã„å¾®ç¬‘ã¿ã¨ç™’ã—ã®ã‚ªãƒ¼ãƒ©", typeIndex: 0 },
      { text: "å ´ã‚’æ˜ã‚‹ãã™ã‚‹å…ƒæ°—ã¨ãƒ†ãƒ³ã‚·ãƒ§ãƒ³", typeIndex: 1 },
      { text: "è½ã¡ç€ãã¨å¤§äººã®ä½™è£•", typeIndex: 2 },
      { text: "å€‹æ€§çš„ã§ãƒŸã‚¹ãƒ†ãƒªã‚¢ã‚¹ãªé›°å›²æ°—", typeIndex: 3 },
      { text: "ã‚ã–ã¨å¯æ„›ã„ä»•è‰ã¨ã‚­ãƒ¥ãƒ³ã¨ã•ã›ã‚‹é­…åŠ›", typeIndex: 4 },
      { text: "åŒ…ã¿è¾¼ã‚“ã§ãã‚Œã‚‹å®‰å¿ƒæ„Ÿã¨é ¼ã‚Œã‚‹å­˜åœ¨æ„Ÿ", typeIndex: 5 },
      { text: "æ¨ã—ã‚„è¶£å‘³ã‚’ä¸€ç·’ã«ç†±ãèªã‚Œã‚‹ãƒˆãƒ¼ã‚¯åŠ›", typeIndex: 6 },
    ]
  },
  {
    q: "å¸­ã«ç€ã„ãŸæœ€åˆã®ã²ã¨è¨€ã¯ï¼Ÿ",
    a: [
      { text: "ã”ä¸»äººæ§˜ã€ä»Šæ—¥ã¯ãŠç–²ã‚Œã§ã™ã­â€¦ã»ã£ã¨ä¸€æ¯ã¤ãã¾ã—ã‚‡ã†ã‹ğŸ’–", typeIndex: 0 },
      { text: "ã”ä¸»äººæ§˜ã€œï¼ä»Šæ—¥ã¯ä¸€ç·’ã«ç››ã‚Šä¸ŠãŒã£ã¡ã‚ƒã„ã¾ã—ã‚‡ã†ï¼", typeIndex: 1 },
      { text: "ã”ä¸»äººæ§˜ã€é™ã‹ã«ã‚†ã£ãŸã‚Šã¨éã”ã—ãŸã„ãŠæ°—åˆ†ã§ã™ã‹ï¼Ÿ", typeIndex: 2 },
      { text: "ã”ä¸»äººæ§˜ã€ä¸æ€è­°ãªä¸–ç•Œã«è¿·ã„è¾¼ã‚“ã æ°—åˆ†ã˜ã‚ƒã‚ã‚Šã¾ã›ã‚“ã‹ï¼Ÿ", typeIndex: 3 },
      { text: "ã”ä¸»äººæ§˜ã€œâ™¡ ã‚‚ã£ã¨ã‚‚ã£ã¨ã‹ã¾ã£ã¦ãã ã•ã„ã£ï¼", typeIndex: 4 },
      { text: "ã”ä¸»äººæ§˜ã€ä»Šæ—¥ã‚ã£ãŸã“ã¨â€¦ç§ã«ãœã‚“ã¶ãŠè©±ã—ã¦ã„ã„ã‚“ã§ã™ã‚ˆ", typeIndex: 5 },
      { text: "ã”ä¸»äººæ§˜ï¼ã‚ã®ã‚¢ãƒ‹ãƒ¡ã®æœ€æ–°è©±ã€ã‚‚ã†ãƒã‚§ãƒƒã‚¯ã•ã‚Œã¾ã—ãŸã‹ï¼ï¼Ÿ", typeIndex: 6 },
    ]
  },
  {
    q: "å¸°ã‚Šéš›ã®ç†æƒ³ã¯ï¼Ÿ",
    a: [
      { text: "ã™ã£ã‹ã‚Šç™’ã•ã‚Œã¦ã€ç¬‘é¡”ã§å¸°ã‚ŠãŸã„", typeIndex: 0 },
      { text: "ã€æ¥½ã—ã‹ã£ãŸãƒ¼ï¼ã€ã¨å…ƒæ°—ã„ã£ã±ã„ã§å¸°ã‚ŠãŸã„", typeIndex: 1 },
      { text: "è½ã¡ç€ã„ãŸæ°—åˆ†ã§ã€ã¾ãŸæ¥ãŸã„ãªã€ã¨æ€ã„ãªãŒã‚‰å¸°ã‚ŠãŸã„", typeIndex: 2 },
      { text: "ä¸æ€è­°ãªä½™éŸ»ã«æµ¸ã‚ŠãªãŒã‚‰å¸°ã‚ŠãŸã„", typeIndex: 3 },
      { text: "èƒ¸ã„ã£ã±ã„ã«ã€å¯æ„›ã„ï¼ã€ã‚’æŠ±ãˆã¦å¸°ã‚ŠãŸã„", typeIndex: 4 },
      { text: "ã€ã‚„ã£ã±ã‚Šé ¼ã‚Œã‚‹ãªãã€ã¨å®‰å¿ƒã—ãªãŒã‚‰å¸°ã‚ŠãŸã„", typeIndex: 5 },
      { text: "æ¨ã—ã‚„è¶£å‘³ã®è©±ã‚’èªã‚Šå°½ãã—ã¦æº€è¶³ã—ã¦å¸°ã‚ŠãŸã„", typeIndex: 6 },
    ]
  },
  {
    q: "ä½•ä»£ç›®ã®ãƒ¡ã‚¤ãƒ‰æœãŒå¥½ãï¼Ÿ",
    a: [
      { text: "ã‚„ã£ã±ã‚Šä¼çµ±ã®åˆä»£ãŒä¸€ç•ªå¥½ãï¼", typeIndex: 0 },
      { text: "å¤§äººã£ã½ã„é›°å›²æ°—ã®å¼ä»£ç›®ãŒå¥½ã", typeIndex: 2 },
      { text: "ã‚­ãƒ¥ãƒ¼ãƒˆã•å…¨é–‹ã®å‚ä»£ç›®ãŒå¥½ã", typeIndex: 4 },
      { text: "å¹»æƒ³çš„ãªé›°å›²æ°—ã®å››ä»£ç›®ãŒå¥½ã", typeIndex: 3 },
      { text: "å…ƒæ°—ã„ã£ã±ã„ã®äº”ä»£ç›®ãŒå¥½ã", typeIndex: 1 },
      { text: "åŒ…å®¹åŠ›ã‚’æ„Ÿã˜ã‚‹å…­ä»£ç›®ãŒå¥½ã", typeIndex: 5 },
      { text: "æ¨ã—æ´»ãƒˆãƒ¼ã‚¯ãŒä¼¼åˆã†ä¸ƒä»£ç›®ãŒå¥½ã", typeIndex: 6 },
    ]
  },
];

// ===== å®Ÿè£…ï¼ˆå…±é€šï¼‰ =====
const elQuiz = document.getElementById("quiz");
const elResult = document.getElementById("resultCard");
const elTitle = document.getElementById("resultTitle");
const elRec = document.getElementById("resultRecommend");
const elDesc = document.getElementById("resultDesc");
const elSecond = document.getElementById("secondBest");

function renderQuiz() {
  elQuiz.innerHTML = "";
  QUESTIONS.forEach((q, idx) => {
    const card = document.createElement("div");
    card.className = "card";
    const qEl = document.createElement("div");
    qEl.className = "q";
    qEl.textContent = `Q${idx+1}. ${q.q}`;
    card.appendChild(qEl);

    const opts = document.createElement("div");
    opts.className = "opts";
    q.a.forEach((opt) => {
      const btn = document.createElement("div");
      btn.className = "opt";
      btn.textContent = opt.text;
      btn.setAttribute("role", "button");
      btn.setAttribute("tabindex", "0");
      btn.onclick = () => {
        opts.querySelectorAll(".opt").forEach(o => o.classList.remove("selected"));
        btn.classList.add("selected");
        card.dataset.answer = String(opt.typeIndex);
      };
      btn.onkeydown = (e) => { if (e.key === "Enter") btn.click(); };
      opts.appendChild(btn);
    });
    card.appendChild(opts);
    elQuiz.appendChild(card);
  });
}

function computeResult() {
  const cards = Array.from(elQuiz.querySelectorAll(".card"));
  const counts = Array(TYPES.length).fill(0);
  for (const c of cards) {
    if (!("answer" in c.dataset)) {
      return { error: "æœªå›ç­”ã®è¨­å•ãŒã‚ã‚Šã¾ã™ã€‚" };
    }
    const t = Number(c.dataset.answer);
    if (!Number.isFinite(t) || t < 0 || t >= TYPES.length) continue;
    counts[t]++;
  }
  let max = -1, maxIdx = -1;
  counts.forEach((v,i)=>{ if (v > max) { max = v; maxIdx = i; } });
  const secondScores = counts.map((v,i)=>({v,i})).filter(x=>x.i!==maxIdx).sort((a,b)=>b.v-a.v);
  const secondBest = secondScores.length ? secondScores[0] : null;
  return { maxIdx, counts, secondBest };
}

function showResult() {
  const r = computeResult();
  if (r.error) { alert(r.error); return; }
  const t = TYPES[r.maxIdx];
  elTitle.textContent = `ã”ä¸»äººæ§˜ã¯ã€${t.label}ã€ï¼`;
  elRec.innerHTML = `ä»Šæ—¥ã®ãŠçµ¦ä»•ã¯ <span class="pill">${t.maids.join("ãƒ»")}</span> ãƒ¡ã‚¤ãƒ‰ãŒã‚ªã‚¹ã‚¹ãƒ¡ã§ã™ğŸ’–`;
  elDesc.textContent = t.desc;
  if (r.secondBest && r.secondBest.v > 0) {
    const s = TYPES[r.secondBest.i];
    elSecond.style.display = "block";
    elSecond.textContent = `æ¬¡ç‚¹ï¼šã€${s.label}ã€ï¼ˆãŠã™ã™ã‚ï¼š${s.maids.join("ãƒ»")}ï¼‰`;
  } else {
    elSecond.style.display = "none";
  }
  elResult.style.display = "block";
  window.scrollTo({ top: elResult.offsetTop - 12, behavior: "smooth" });
}

function resetQuiz() {
  renderQuiz();
  elResult.style.display = "none";
}

document.getElementById("btnSubmit").addEventListener("click", showResult);
document.getElementById("btnReset").addEventListener("click", resetQuiz);
renderQuiz();
</script>
</body>
</html>
